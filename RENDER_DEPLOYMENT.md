# Render Deployment Guide

This Django project is now configured for deployment on Render.com. Follow these steps:

## Prerequisites

- Render.com account (free tier available)
- GitHub repository with your code pushed
- PostgreSQL database (optional for free tier)

## Deployment Steps

### 1. Connect Your Repository

1. Visit https://dashboard.render.com
2. Click "New +" → "Web Service"
3. Connect your GitHub repository
4. Select the repository containing this project

### 2. Configure the Service

- **Name**: `vacancy-tracker-backend` (or your preferred name)
- **Environment**: Python
- **Build Command**: `pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate`
- **Start Command**: `gunicorn backend_vac_tr_main.wsgi:application`
- **Plan**: Free (or paid, based on your needs)

### 3. Set Environment Variables

In the "Environment" section on Render, add these variables:

```
SECRET_KEY=<auto-generated or use a secure key>
DEBUG=False
ALLOWED_HOSTS=your-service-name.onrender.com
DATABASE_URL=<your PostgreSQL connection string>
```

**To generate a SECRET_KEY**, run this locally:

```bash
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

### 4. Configure Database (Optional)

For free tier:

- SQLite (default, works but not recommended for production)
- Or use Render's PostgreSQL database

To add PostgreSQL on Render:

1. Click "New +" → "PostgreSQL"
2. Create a database
3. Copy the connection string to `DATABASE_URL` environment variable

### 5. Deploy

1. Click "Create Web Service"
2. Render will automatically deploy your app
3. Your app will be live at `https://your-service-name.onrender.com`

## Important Notes

✅ **What's been configured:**

- Environment variable management with python-decouple
- WhiteNoise for static file serving
- Security settings for production (HTTPS redirect, secure cookies)
- Gunicorn as the production WSGI server
- PostgreSQL support via dj-database-url
- Database migrations on deployment

⚠️ **For Production:**

1. Change `DEBUG` to `False` in environment variables
2. Use strong `SECRET_KEY` (don't commit the real one)
3. Use PostgreSQL instead of SQLite
4. Set proper `ALLOWED_HOSTS` with your domain
5. Configure CORS if your frontend is on a different domain

## Deployment with render.yaml (Advanced)

If you want to use Infrastructure as Code, the `render.yaml` file defines the entire infrastructure. You can:

1. Push `render.yaml` to your repository
2. On Render, use "Create from YAML" instead of manual configuration
3. Everything will be auto-configured

## Troubleshooting

### Static files not loading

- Ensure `python manage.py collectstatic --noinput` runs during build
- Check that `STATICFILES_STORAGE` is set to WhiteNoise storage

### Database errors

- Verify `DATABASE_URL` environment variable is set
- Run `python manage.py migrate` during release phase (first deployment)

### 500 errors

- Check Render logs for detailed error messages
- Ensure environment variables are properly set
- Verify `ALLOWED_HOSTS` includes your Render domain

## Local Development

To test locally with production settings:

```bash
# Create .env file with:
cp .env.example .env

# Edit .env with your local settings
nano .env

# Install dependencies
pip install -r requirements.txt

# Run migrations
python manage.py migrate

# Collect static files
python manage.py collectstatic --noinput

# Start development server
python manage.py runserver
```

## Additional Resources

- [Render Django Deployment](https://render.com/docs/deploy-django)
- [Django Deployment Checklist](https://docs.djangoproject.com/en/6.0/howto/deployment/checklist/)
- [WhiteNoise Documentation](https://whitenoise.readthedocs.io/)
